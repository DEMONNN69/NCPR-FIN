{%extends 'basic.html'%}
{%block body%}
{% load static tailwind_tags %}
{% tailwind_css %}
{%load static%}


<div class="projects m-2">
    <h2 class=" text-lg ml-2 text-white my-6 ">Your Search Results > </h2>
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 justify-center gap-2 overflow-y-scroll">
        <div style="background-color: rgb(255, 255, 255);">
            <form method="get" id="filter-form" action="{%url 'filteroption'%}">
                <div class="filter-section">
                    <h3>Projects in City</h3>
                    {% for project in projects_in_city %}
                    <label>
                        <input type="checkbox" name="projects_in_city" value="{{ project }}" {% if project in selected_project_in_city %}checked{% endif %}> {{ project|capfirst }}
                    </label>
                    {% endfor %}
                </div>
                       
                
                <div class="filter-section">
                    <input type="hidden" name="city" value="{{ selected_city }}">
                    <input type="hidden" name="size" value="{{ selected_size }}">
                    <input type="hidden" name="price_range" value="{{ selected_price_range }}">
                
                    <h3>Property Type</h3>
                    {% for option in property_type_options %}
                    <label>
                        <input type="checkbox" name="property_type" value="{{ option }}" {% if option in selected_property_types %}checked{% endif %}> {{ option|capfirst }}
                    </label>
                    {% endfor %}
                </div>
            
                <div class="filter-section">
                    <h3>Sort by Price</h3>
                    <label>
                        <input type="radio" name="price_order" value="low_to_high" {% if selected_price_order == 'low_to_high' %}checked{% endif %}>
                        Low to High
                    </label>
                    <label>
                        <input type="radio" name="price_order" value="high_to_low" {% if selected_price_order == 'high_to_low' %}checked{% endif %}>
                        High to Low
                    </label>
                </div>
            
                <div class="filter-section">
                    <h3>Project Status</h3>
                    {% for option in status_options %}
                    <label>
                        <input type="checkbox" name="status" value="{{ option }}" {% if option in selected_status %}checked{% endif %}> {{ option|capfirst }}
                    </label>
                    {% endfor %}
                </div>
            </form>
            
        </div>
        {% for property in properties %}
        <a href="{% url 'prop_view'%}">
            <div class="property w-[200px] h-[345px] lg:w-[25vw] lg:h-[20vw] flex flex-col relative group">
                <div class="display h-full w-full overflow-hidden rounded-3xl">
                    <img src="/media/{{property.main_img}}" alt="Beautiful Family Home"
                        class="object-cover object-center w-full h-full group-hover:scale-110 duration-500">
                </div>
                <div class="description h-[41%] w-full space-y-2 px-2 mt-[102%] absolute backdrop-blur-lg rounded-3xl">
                    <h2 class="font-semibold bg-gradient-to-br from-white from-[-1rem] via-gray-900 via-50% to-black  bg-clip-text text-transparent text-2xl price"> â‚¹ {{ property.price }}</h2>
                    <div class="flex gap-x-5 h-6 overflow-hidden text-white">
                        <p> {{ property.title }}</p>
                        <p>|</p>
                        <p>{{ property.bedrooms }}BHK</p>
                    </div>  
                    <p class="text-white"> {{ property.city }}- {{property.zip_code }}</p>
                    <div class="flex justify-between items-center rounded-3xl border border-black px-2 -mx-1 py-[2px]">
                        <span>
                            More details
                        </span>
                        <span class="group-hover:rotate-[360deg] duration-500">
                            <img src="/media/icons/arrow.png" alt="" class="h-6">
                        </span>
                    </div>

                </div>
            </div>
        </a>

        {% endfor %}
    </div>
</div>
<script>
    // Select all checkboxes and radio buttons within the form with ID 'filter-form'
    const filters = document.querySelectorAll('#filter-form input[type="checkbox"], #filter-form input[type="radio"]');
    
    // Loop through each checkbox and radio button
    filters.forEach(filter => {
        // Add an event listener that triggers when the checkbox or radio button is changed
        filter.addEventListener('change', function() {
            // Submit the form automatically when a change is detected
         

            document.getElementById('filter-form').submit();
            

        });
    });
    </script>
    
{%endblock%}